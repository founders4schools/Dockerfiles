sudo: required

env:
  - DOCKER_FILE_PATH=./elasticsearch/6.1.1/ TAG=es6.1.1
#  - DOCKER_FILE_PATH=./nodejs/6/ TAG=node6
#  - DOCKER_FILE_PATH=./nodejs/8/ TAG=node8
  - DOCKER_FILE_PATH=./python-gis-node/python3/ TAG=py3.6
  - DOCKER_FILE_PATH=./python-gis-node/python3/circle-ci/ TAG=py3.6-ci

services:
  - docker

script:
  - docker build -t founders4schools/dockerfiles:$TAG $DOCKER_FILE_PATH

notifications:
  slack:
    rooms:
      - f4s:u17h2Cc7RhhHNtypnAu7jbgY#dev
    on_success: change
    on_failure: always
  email: false

deploy:
  provider: script
  script: bash docker_push.sh
  on:
    branch: master
